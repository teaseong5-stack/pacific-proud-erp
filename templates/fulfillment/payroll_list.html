{% extends 'base.html' %}
{% load humanize %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h2>ğŸ’° ê¸‰ì—¬ ëŒ€ì¥</h2>
    <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addModal"><i class="bi bi-plus-lg"></i> ê¸‰ì—¬ ì§€ê¸‰</button>
</div>
<div class="card shadow-sm mt-3">
    <table class="table table-hover align-middle mb-0" style="font-size: 0.9rem;">
        <thead class="table-light">
            <tr><th>ê·€ì†ì›”</th><th>ì§ì›</th><th class="text-end">ê¸°ë³¸ê¸‰</th><th class="text-end">ì„±ê³¼ê¸‰</th><th class="text-end">ìˆ˜ë‹¹(ë…„/ì›”ì°¨)</th><th class="text-end text-danger">ì°¨ê°ì•¡</th><th class="text-end table-primary">ì‹¤ìˆ˜ë ¹ì•¡</th><th class="text-center">ê´€ë¦¬</th></tr>
        </thead>
        <tbody>
            {% for pay in payrolls %}
            <tr>
                <td>{{ pay.month_label }}<br><small class="text-muted">{{ pay.payment_date|date:"m-d" }}</small></td>
                <td class="fw-bold">{{ pay.employee.name }}</td>
                <td class="text-end">{{ pay.base_pay|intcomma }}</td>
                <td class="text-end">{{ pay.bonus|intcomma }}</td>
                <td class="text-end">{{ pay.leave_pay|intcomma }}</td>
                <td class="text-end text-danger">- {{ pay.deduction|intcomma }}</td>
                <td class="text-end fw-bold text-primary" style="font-size: 1.1em;">{{ pay.total_amount|intcomma }} Ä‘</td>
                <td class="text-center">
                    <a href="{% url 'fulfillment:payroll_update' pay.id %}" class="btn btn-sm btn-outline-primary"><i class="bi bi-pencil-square"></i></a>
                    <a href="{% url 'fulfillment:payroll_delete' pay.id %}" class="btn btn-sm btn-outline-danger"><i class="bi bi-trash"></i></a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<div class="modal fade" id="addModal" tabindex="-1" aria-hidden="true"><div class="modal-dialog modal-dialog-centered modal-lg"><div class="modal-content"><div class="modal-header bg-primary text-white"><h5 class="modal-title">ğŸ’° ê¸‰ì—¬ ì§€ê¸‰ ë“±ë¡</h5><button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button></div><form method="post" action="{% url 'fulfillment:payroll_create' %}">{% csrf_token %}<div class="modal-body"><div class="row g-3"><div class="col-6"><label class="form-label fw-bold">ê·€ì†ì›”</label>{{ form.month_label }}</div><div class="col-6"><label class="form-label fw-bold">ì§€ê¸‰ì¼</label>{{ form.payment_date }}</div><div class="col-12"><label class="form-label fw-bold">ëŒ€ìƒ ì§ì›</label>{{ form.employee }}</div><div class="col-6"><label class="form-label fw-bold">ê¸°ë³¸ê¸‰</label>{{ form.base_pay }}</div><div class="col-6"><label class="form-label fw-bold">ì„±ê³¼ê¸‰</label>{{ form.bonus }}</div><div class="col-6"><label class="form-label fw-bold">ì—°/ì›”ì°¨ ìˆ˜ë‹¹</label>{{ form.leave_pay }}</div><div class="col-6"><label class="form-label fw-bold text-danger">ì°¨ê°ì•¡ (ì„¸ê¸ˆ ë“±)</label>{{ form.deduction }}</div></div></div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ì·¨ì†Œ</button><button type="submit" class="btn btn-primary">ì§€ê¸‰ í™•ì •</button></div></form></div></div></div>
{% endblock %}